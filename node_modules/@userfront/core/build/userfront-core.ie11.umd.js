!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):(e||self).core=n()}(this,function(){function e(e,n){this.name="AggregateError",this.errors=e,this.message=n||""}e.prototype=Error.prototype;var n=setTimeout;function t(e){return Boolean(e&&void 0!==e.length)}function r(){}function o(e){if(!(this instanceof o))throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],d(e,this)}function a(e,n){for(;3===e._state;)e=e._value;0!==e._state?(e._handled=!0,o._immediateFn(function(){var t=1===e._state?n.onFulfilled:n.onRejected;if(null!==t){var r;try{r=t(e._value)}catch(e){return void s(n.promise,e)}i(n.promise,r)}else(1===e._state?i:s)(n.promise,e._value)})):e._deferreds.push(n)}function i(e,n){try{if(n===e)throw new TypeError("A promise cannot be resolved with itself.");if(n&&("object"==typeof n||"function"==typeof n)){var t=n.then;if(n instanceof o)return e._state=3,e._value=n,void c(e);if("function"==typeof t)return void d((r=t,a=n,function(){r.apply(a,arguments)}),e)}e._state=1,e._value=n,c(e)}catch(n){s(e,n)}var r,a}function s(e,n){e._state=2,e._value=n,c(e)}function c(e){2===e._state&&0===e._deferreds.length&&o._immediateFn(function(){e._handled||o._unhandledRejectionFn(e._value)});for(var n=0,t=e._deferreds.length;n<t;n++)a(e,e._deferreds[n]);e._deferreds=null}function u(e,n,t){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof n?n:null,this.promise=t}function d(e,n){var t=!1;try{e(function(e){t||(t=!0,i(n,e))},function(e){t||(t=!0,s(n,e))})}catch(e){if(t)return;t=!0,s(n,e)}}o.prototype.catch=function(e){return this.then(null,e)},o.prototype.then=function(e,n){var t=new this.constructor(r);return a(this,new u(e,n,t)),t},o.prototype.finally=function(e){var n=this.constructor;return this.then(function(t){return n.resolve(e()).then(function(){return t})},function(t){return n.resolve(e()).then(function(){return n.reject(t)})})},o.all=function(e){return new o(function(n,r){if(!t(e))return r(new TypeError("Promise.all accepts an array"));var o=Array.prototype.slice.call(e);if(0===o.length)return n([]);var a=o.length;function i(e,t){try{if(t&&("object"==typeof t||"function"==typeof t)){var s=t.then;if("function"==typeof s)return void s.call(t,function(n){i(e,n)},r)}o[e]=t,0==--a&&n(o)}catch(e){r(e)}}for(var s=0;s<o.length;s++)i(s,o[s])})},o.any=function(n){var t=this;return new t(function(r,o){if(!n||void 0===n.length)return o(new TypeError("Promise.any accepts an array"));var a=Array.prototype.slice.call(n);if(0===a.length)return o();for(var i=[],s=0;s<a.length;s++)try{t.resolve(a[s]).then(r).catch(function(n){i.push(n),i.length===a.length&&o(new e(i,"All promises were rejected"))})}catch(e){o(e)}})},o.allSettled=function(e){return new this(function(n,t){if(!e||void 0===e.length)return t(new TypeError(typeof e+" "+e+" is not iterable(cannot read property Symbol(Symbol.iterator))"));var r=Array.prototype.slice.call(e);if(0===r.length)return n([]);var o=r.length;function a(e,t){if(t&&("object"==typeof t||"function"==typeof t)){var i=t.then;if("function"==typeof i)return void i.call(t,function(n){a(e,n)},function(t){r[e]={status:"rejected",reason:t},0==--o&&n(r)})}r[e]={status:"fulfilled",value:t},0==--o&&n(r)}for(var i=0;i<r.length;i++)a(i,r[i])})},o.resolve=function(e){return e&&"object"==typeof e&&e.constructor===o?e:new o(function(n){n(e)})},o.reject=function(e){return new o(function(n,t){t(e)})},o.race=function(e){return new o(function(n,r){if(!t(e))return r(new TypeError("Promise.race accepts an array"));for(var a=0,i=e.length;a<i;a++)o.resolve(e[a]).then(n,r)})},o._immediateFn="function"==typeof setImmediate&&function(e){setImmediate(e)}||function(e){n(e,0)},o._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)};var l=function(e,n){return function(){for(var t=new Array(arguments.length),r=0;r<t.length;r++)t[r]=arguments[r];return e.apply(n,t)}},f=Object.prototype.toString;function h(e){return"[object Array]"===f.call(e)}function p(e){return void 0===e}function m(e){return null!==e&&"object"==typeof e}function v(e){if("[object Object]"!==f.call(e))return!1;var n=Object.getPrototypeOf(e);return null===n||n===Object.prototype}function w(e){return"[object Function]"===f.call(e)}function g(e,n){if(null!=e)if("object"!=typeof e&&(e=[e]),h(e))for(var t=0,r=e.length;t<r;t++)n.call(null,e[t],t,e);else for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&n.call(null,e[o],o,e)}var k={isArray:h,isArrayBuffer:function(e){return"[object ArrayBuffer]"===f.call(e)},isBuffer:function(e){return null!==e&&!p(e)&&null!==e.constructor&&!p(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){return"undefined"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:m,isPlainObject:v,isUndefined:p,isDate:function(e){return"[object Date]"===f.call(e)},isFile:function(e){return"[object File]"===f.call(e)},isBlob:function(e){return"[object Blob]"===f.call(e)},isFunction:w,isStream:function(e){return m(e)&&w(e.pipe)},isURLSearchParams:function(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:g,merge:function e(){var n={};function t(t,r){n[r]=v(n[r])&&v(t)?e(n[r],t):v(t)?e({},t):h(t)?t.slice():t}for(var r=0,o=arguments.length;r<o;r++)g(arguments[r],t);return n},extend:function(e,n,t){return g(n,function(n,r){e[r]=t&&"function"==typeof n?l(n,t):n}),e},trim:function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e}};function y(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var R=function(e,n,t){if(!n)return e;var r;if(t)r=t(n);else if(k.isURLSearchParams(n))r=n.toString();else{var o=[];k.forEach(n,function(e,n){null!=e&&(k.isArray(e)?n+="[]":e=[e],k.forEach(e,function(e){k.isDate(e)?e=e.toISOString():k.isObject(e)&&(e=JSON.stringify(e)),o.push(y(n)+"="+y(e))}))}),r=o.join("&")}if(r){var a=e.indexOf("#");-1!==a&&(e=e.slice(0,a)),e+=(-1===e.indexOf("?")?"?":"&")+r}return e};function b(){this.handlers=[]}b.prototype.use=function(e,n,t){return this.handlers.push({fulfilled:e,rejected:n,synchronous:!!t&&t.synchronous,runWhen:t?t.runWhen:null}),this.handlers.length-1},b.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},b.prototype.forEach=function(e){k.forEach(this.handlers,function(n){null!==n&&e(n)})};var T=b,j=function(e,n){k.forEach(e,function(t,r){r!==n&&r.toUpperCase()===n.toUpperCase()&&(e[n]=t,delete e[r])})},E=function(e,n,t,r,o){return e.config=n,t&&(e.code=t),e.request=r,e.response=o,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e},U=function(e,n,t,r,o){var a=new Error(e);return E(a,n,t,r,o)},x=k.isStandardBrowserEnv()?{write:function(e,n,t,r,o,a){var i=[];i.push(e+"="+encodeURIComponent(n)),k.isNumber(t)&&i.push("expires="+new Date(t).toGMTString()),k.isString(r)&&i.push("path="+r),k.isString(o)&&i.push("domain="+o),!0===a&&i.push("secure"),document.cookie=i.join("; ")},read:function(e){var n=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return n?decodeURIComponent(n[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}},P=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"],C=k.isStandardBrowserEnv()?function(){var e,n=/(msie|trident)/i.test(navigator.userAgent),t=document.createElement("a");function r(e){var r=e;return n&&(t.setAttribute("href",r),r=t.href),t.setAttribute("href",r),{href:t.href,protocol:t.protocol?t.protocol.replace(/:$/,""):"",host:t.host,search:t.search?t.search.replace(/^\?/,""):"",hash:t.hash?t.hash.replace(/^#/,""):"",hostname:t.hostname,port:t.port,pathname:"/"===t.pathname.charAt(0)?t.pathname:"/"+t.pathname}}return e=r(window.location.href),function(n){var t=k.isString(n)?r(n):n;return t.protocol===e.protocol&&t.host===e.host}}():function(){return!0},I={"Content-Type":"application/x-www-form-urlencoded"};function S(e,n){!k.isUndefined(e)&&k.isUndefined(e["Content-Type"])&&(e["Content-Type"]=n)}var q,O={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:(("undefined"!=typeof XMLHttpRequest||"undefined"!=typeof process&&"[object process]"===Object.prototype.toString.call(process))&&(q=function(e){return new o(function(n,t){var r=e.data,o=e.headers,a=e.responseType;k.isFormData(r)&&delete o["Content-Type"];var i=new XMLHttpRequest;if(e.auth){var s=e.auth.username||"",c=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";o.Authorization="Basic "+btoa(s+":"+c)}var u,d,l=(d=e.url,(u=e.baseURL)&&!/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(d)?function(e,n){return n?e.replace(/\/+$/,"")+"/"+n.replace(/^\/+/,""):e}(u,d):d);function f(){if(i){var r,o,s,c,u,d="getAllResponseHeaders"in i?(r=i.getAllResponseHeaders(),u={},r?(k.forEach(r.split("\n"),function(e){if(c=e.indexOf(":"),o=k.trim(e.substr(0,c)).toLowerCase(),s=k.trim(e.substr(c+1)),o){if(u[o]&&P.indexOf(o)>=0)return;u[o]="set-cookie"===o?(u[o]?u[o]:[]).concat([s]):u[o]?u[o]+", "+s:s}}),u):u):null;!function(e,n,t){var r=t.config.validateStatus;t.status&&r&&!r(t.status)?n(U("Request failed with status code "+t.status,t.config,null,t.request,t)):e(t)}(n,t,{data:a&&"text"!==a&&"json"!==a?i.response:i.responseText,status:i.status,statusText:i.statusText,headers:d,config:e,request:i}),i=null}}if(i.open(e.method.toUpperCase(),R(l,e.params,e.paramsSerializer),!0),i.timeout=e.timeout,"onloadend"in i?i.onloadend=f:i.onreadystatechange=function(){i&&4===i.readyState&&(0!==i.status||i.responseURL&&0===i.responseURL.indexOf("file:"))&&setTimeout(f)},i.onabort=function(){i&&(t(U("Request aborted",e,"ECONNABORTED",i)),i=null)},i.onerror=function(){t(U("Network Error",e,null,i)),i=null},i.ontimeout=function(){var n="timeout of "+e.timeout+"ms exceeded";e.timeoutErrorMessage&&(n=e.timeoutErrorMessage),t(U(n,e,e.transitional&&e.transitional.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",i)),i=null},k.isStandardBrowserEnv()){var h=(e.withCredentials||C(l))&&e.xsrfCookieName?x.read(e.xsrfCookieName):void 0;h&&(o[e.xsrfHeaderName]=h)}"setRequestHeader"in i&&k.forEach(o,function(e,n){void 0===r&&"content-type"===n.toLowerCase()?delete o[n]:i.setRequestHeader(n,e)}),k.isUndefined(e.withCredentials)||(i.withCredentials=!!e.withCredentials),a&&"json"!==a&&(i.responseType=e.responseType),"function"==typeof e.onDownloadProgress&&i.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&i.upload&&i.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then(function(e){i&&(i.abort(),t(e),i=null)}),r||(r=null),i.send(r)})}),q),transformRequest:[function(e,n){return j(n,"Accept"),j(n,"Content-Type"),k.isFormData(e)||k.isArrayBuffer(e)||k.isBuffer(e)||k.isStream(e)||k.isFile(e)||k.isBlob(e)?e:k.isArrayBufferView(e)?e.buffer:k.isURLSearchParams(e)?(S(n,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):k.isObject(e)||n&&"application/json"===n["Content-Type"]?(S(n,"application/json"),function(e,n,t){if(k.isString(e))try{return(0,JSON.parse)(e),k.trim(e)}catch(e){if("SyntaxError"!==e.name)throw e}return(0,JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){var n=this.transitional,t=!(n&&n.silentJSONParsing)&&"json"===this.responseType;if(t||n&&n.forcedJSONParsing&&k.isString(e)&&e.length)try{return JSON.parse(e)}catch(e){if(t){if("SyntaxError"===e.name)throw E(e,this,"E_JSON_PARSE");throw e}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};k.forEach(["delete","get","head"],function(e){O.headers[e]={}}),k.forEach(["post","put","patch"],function(e){O.headers[e]=k.merge(I)});var N=O,_=function(e,n,t){var r=this||N;return k.forEach(t,function(t){e=t.call(r,e,n)}),e},A=function(e){return!(!e||!e.__CANCEL__)};function M(e){e.cancelToken&&e.cancelToken.throwIfRequested()}var F=function(e){return M(e),e.headers=e.headers||{},e.data=_.call(e,e.data,e.headers,e.transformRequest),e.headers=k.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),k.forEach(["delete","get","head","post","put","patch","common"],function(n){delete e.headers[n]}),(e.adapter||N.adapter)(e).then(function(n){return M(e),n.data=_.call(e,n.data,n.headers,e.transformResponse),n},function(n){return A(n)||(M(e),n&&n.response&&(n.response.data=_.call(e,n.response.data,n.response.headers,e.transformResponse))),o.reject(n)})},B=function(e,n){n=n||{};var t={},r=["url","method","data"],o=["headers","auth","proxy","params"],a=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],i=["validateStatus"];function s(e,n){return k.isPlainObject(e)&&k.isPlainObject(n)?k.merge(e,n):k.isPlainObject(n)?k.merge({},n):k.isArray(n)?n.slice():n}function c(r){k.isUndefined(n[r])?k.isUndefined(e[r])||(t[r]=s(void 0,e[r])):t[r]=s(e[r],n[r])}k.forEach(r,function(e){k.isUndefined(n[e])||(t[e]=s(void 0,n[e]))}),k.forEach(o,c),k.forEach(a,function(r){k.isUndefined(n[r])?k.isUndefined(e[r])||(t[r]=s(void 0,e[r])):t[r]=s(void 0,n[r])}),k.forEach(i,function(r){r in n?t[r]=s(e[r],n[r]):r in e&&(t[r]=s(void 0,e[r]))});var u=r.concat(o).concat(a).concat(i),d=Object.keys(e).concat(Object.keys(n)).filter(function(e){return-1===u.indexOf(e)});return k.forEach(d,c),t},L={name:"axios",version:"0.21.4",description:"Promise based HTTP client for the browser and node.js",main:"index.js",scripts:{test:"grunt test",start:"node ./sandbox/server.js",build:"NODE_ENV=production grunt build",preversion:"npm test",version:"npm run build && grunt version && git add -A dist && git add CHANGELOG.md bower.json package.json",postversion:"git push && git push --tags",examples:"node ./examples/server.js",coveralls:"cat coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js",fix:"eslint --fix lib/**/*.js"},repository:{type:"git",url:"https://github.com/axios/axios.git"},keywords:["xhr","http","ajax","promise","node"],author:"Matt Zabriskie",license:"MIT",bugs:{url:"https://github.com/axios/axios/issues"},homepage:"https://axios-http.com",devDependencies:{coveralls:"^3.0.0","es6-promise":"^4.2.4",grunt:"^1.3.0","grunt-banner":"^0.6.0","grunt-cli":"^1.2.0","grunt-contrib-clean":"^1.1.0","grunt-contrib-watch":"^1.0.0","grunt-eslint":"^23.0.0","grunt-karma":"^4.0.0","grunt-mocha-test":"^0.13.3","grunt-ts":"^6.0.0-beta.19","grunt-webpack":"^4.0.2","istanbul-instrumenter-loader":"^1.0.0","jasmine-core":"^2.4.1",karma:"^6.3.2","karma-chrome-launcher":"^3.1.0","karma-firefox-launcher":"^2.1.0","karma-jasmine":"^1.1.1","karma-jasmine-ajax":"^0.1.13","karma-safari-launcher":"^1.0.0","karma-sauce-launcher":"^4.3.6","karma-sinon":"^1.0.5","karma-sourcemap-loader":"^0.3.8","karma-webpack":"^4.0.2","load-grunt-tasks":"^3.5.2",minimist:"^1.2.0",mocha:"^8.2.1",sinon:"^4.5.0","terser-webpack-plugin":"^4.2.3",typescript:"^4.0.5","url-search-params":"^0.10.0",webpack:"^4.44.2","webpack-dev-server":"^3.11.0"},browser:{"./lib/adapters/http.js":"./lib/adapters/xhr.js"},jsdelivr:"dist/axios.min.js",unpkg:"dist/axios.min.js",typings:"./index.d.ts",dependencies:{"follow-redirects":"^1.14.0"},bundlesize:[{path:"./dist/axios.min.js",threshold:"5kB"}]},D={};["object","boolean","number","function","string","symbol"].forEach(function(e,n){D[e]=function(t){return typeof t===e||"a"+(n<1?"n ":" ")+e}});var z={},J=L.version.split(".");function H(e,n){for(var t=n?n.split("."):J,r=e.split("."),o=0;o<3;o++){if(t[o]>r[o])return!0;if(t[o]<r[o])return!1}return!1}D.transitional=function(e,n,t){var r=n&&H(n);function o(e,n){return"[Axios v"+L.version+"] Transitional option '"+e+"'"+n+(t?". "+t:"")}return function(t,a,i){if(!1===e)throw new Error(o(a," has been removed in "+n));return r&&!z[a]&&(z[a]=!0,console.warn(o(a," has been deprecated since v"+n+" and will be removed in the near future"))),!e||e(t,a,i)}};var W={isOlderVersion:H,assertOptions:function(e,n,t){if("object"!=typeof e)throw new TypeError("options must be an object");for(var r=Object.keys(e),o=r.length;o-- >0;){var a=r[o],i=n[a];if(i){var s=e[a],c=void 0===s||i(s,a,e);if(!0!==c)throw new TypeError("option "+a+" must be "+c)}else if(!0!==t)throw Error("Unknown option "+a)}},validators:D},V=W.validators;function K(e){this.defaults=e,this.interceptors={request:new T,response:new T}}K.prototype.request=function(e){"string"==typeof e?(e=arguments[1]||{}).url=arguments[0]:e=e||{},(e=B(this.defaults,e)).method=e.method?e.method.toLowerCase():this.defaults.method?this.defaults.method.toLowerCase():"get";var n=e.transitional;void 0!==n&&W.assertOptions(n,{silentJSONParsing:V.transitional(V.boolean,"1.0.0"),forcedJSONParsing:V.transitional(V.boolean,"1.0.0"),clarifyTimeoutError:V.transitional(V.boolean,"1.0.0")},!1);var t=[],r=!0;this.interceptors.request.forEach(function(n){"function"==typeof n.runWhen&&!1===n.runWhen(e)||(r=r&&n.synchronous,t.unshift(n.fulfilled,n.rejected))});var a,i=[];if(this.interceptors.response.forEach(function(e){i.push(e.fulfilled,e.rejected)}),!r){var s=[F,void 0];for(Array.prototype.unshift.apply(s,t),s=s.concat(i),a=o.resolve(e);s.length;)a=a.then(s.shift(),s.shift());return a}for(var c=e;t.length;){var u=t.shift(),d=t.shift();try{c=u(c)}catch(e){d(e);break}}try{a=F(c)}catch(e){return o.reject(e)}for(;i.length;)a=a.then(i.shift(),i.shift());return a},K.prototype.getUri=function(e){return e=B(this.defaults,e),R(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},k.forEach(["delete","get","head","options"],function(e){K.prototype[e]=function(n,t){return this.request(B(t||{},{method:e,url:n,data:(t||{}).data}))}}),k.forEach(["post","put","patch"],function(e){K.prototype[e]=function(n,t,r){return this.request(B(r||{},{method:e,url:n,data:t}))}});var X=K;function $(e){this.message=e}$.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},$.prototype.__CANCEL__=!0;var G=$;function Z(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var n;this.promise=new o(function(e){n=e});var t=this;e(function(e){t.reason||(t.reason=new G(e),n(t.reason))})}Z.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},Z.source=function(){var e;return{token:new Z(function(n){e=n}),cancel:e}};var Q=Z;function Y(e){var n=new X(e),t=l(X.prototype.request,n);return k.extend(t,X.prototype,n),k.extend(t,n),t}var ee=Y(N);ee.Axios=X,ee.create=function(e){return Y(B(ee.defaults,e))},ee.Cancel=G,ee.CancelToken=Q,ee.isCancel=A,ee.all=function(e){return o.all(e)},ee.spread=function(e){return function(n){return e.apply(null,n)}},ee.isAxiosError=function(e){return"object"==typeof e&&!0===e.isAxiosError};var ne=ee;ne.default=ee;var te=ne,re={user:{},tokens:{},mode:"live"},oe=function(e){var n={exports:{}};return function(e,n){var t;t=function(){function e(){for(var e=0,n={};e<arguments.length;e++){var t=arguments[e];for(var r in t)n[r]=t[r]}return n}function n(e){return e.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function t(r){function o(){}function a(n,t,a){if("undefined"!=typeof document){"number"==typeof(a=e({path:"/"},o.defaults,a)).expires&&(a.expires=new Date(1*new Date+864e5*a.expires)),a.expires=a.expires?a.expires.toUTCString():"";try{var i=JSON.stringify(t);/^[\{\[]/.test(i)&&(t=i)}catch(e){}t=r.write?r.write(t,n):encodeURIComponent(String(t)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),n=encodeURIComponent(String(n)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var s="";for(var c in a)a[c]&&(s+="; "+c,!0!==a[c]&&(s+="="+a[c].split(";")[0]));return document.cookie=n+"="+t+s}}function i(e,t){if("undefined"!=typeof document){for(var o={},a=document.cookie?document.cookie.split("; "):[],i=0;i<a.length;i++){var s=a[i].split("="),c=s.slice(1).join("=");t||'"'!==c.charAt(0)||(c=c.slice(1,-1));try{var u=n(s[0]);if(c=(r.read||r)(c,u)||n(c),t)try{c=JSON.parse(c)}catch(e){}if(o[u]=c,e===u)break}catch(e){}}return e?o[e]:o}}return o.set=a,o.get=function(e){return i(e,!1)},o.getJSON=function(e){return i(e,!0)},o.remove=function(n,t){a(n,"",e(t,{expires:-1}))},o.defaults={},o.withConverter=t,o}(function(){})},e.exports=t()}(n),n.exports}();function ae(e){try{var n=e.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),t=decodeURIComponent(window.atob(n).split("").map(function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)}).join(""));return JSON.parse(t)}catch(e){console.error("Problem decoding JWT payload",e)}}function ie(e){try{if(!e)return!1;var n=ae(e);return new Date(1e3*n.exp)>new Date}catch(e){return!1}}function se(e){var n,t;if(e){if("string"==typeof e)throw new Error(e);if(null!=e&&null!=(n=e.response)&&null!=(t=n.data)&&t.message)throw new Error(e.response.data.message);throw e}}function ce(){return"undefined"!=typeof window}var ue=re.user;function de(e){return e.replace(/([^:]\/)\/+/g,"$1")}var le=function(e,n,t){try{var r=de(""+re.baseUrl+e);return o.resolve(te.put(r,n,t))}catch(e){return o.reject(e)}},fe=function(e,n,t){try{var r=de(""+re.baseUrl+e);return o.resolve(te.post(r,n,t))}catch(e){return o.reject(e)}},he=function(e,n){try{var t=de(""+re.baseUrl+e);return o.resolve(te.get(t,n))}catch(e){return o.reject(e)}};function pe(e,n,t){var r=t+"."+re.tenantId;n=n||{secure:"live"===re.mode,sameSite:"Lax"},"refresh"===t&&(n.sameSite="Strict"),oe.set(r,e,n)}function me(e){var n,t;try{var r=window.location.pathname,o=window.location.hostname,a=o.split(".").slice(-2).join(".");n=[void 0,r,"/"],t=[void 0,o,"."+o,a,"."+a]}catch(e){n=[void 0,"/"],t=[void 0]}n.map(function(n){t.map(function(t){var r={};t&&(r.domain=t),n&&(r.path=n),oe.remove(e,r)})})}function ve(){me(re.tokens.accessTokenName),me(re.tokens.idTokenName),me(re.tokens.refreshTokenName),re.tokens.accessToken=void 0,re.tokens.idToken=void 0,re.tokens.refreshToken=void 0,function(){for(var e in re.user)"function"!=typeof re.user[e]&&delete re.user[e]}()}function we(){return!!Ie.firstFactorToken}function ge(){return Ie.firstFactorToken?{authorization:"Bearer "+Ie.firstFactorToken}:{}}function ke(){Ie.secondFactors=[],Ie.firstFactorToken=null}var ye=function(){try{return o.resolve(Re()).then(function(e){return{isLoggedIn:e,needsSecondFactor:we(),firstFactors:Ie.firstFactors,secondFactors:Ie.secondFactors,resetMfaState:ke}})}catch(e){return o.reject(e)}},Re=function(){return o.resolve(function(e,n){try{var t=!!Ae()||!!ie(re.tokens.refreshToken)&&o.resolve(Oe()).then(function(){return Ae()})}catch(e){return!1}return t&&t.then?t.then(void 0,function(){return!1}):t}())},be={codeChallenge:"",get usePkce(){return!!be.codeChallenge}};function Te(){ce()&&(window.localStorage.removeItem("uf_pkce_code_challenge"),window.localStorage.removeItem("uf_pkce_code_challenge_expiresAt"))}function je(){if(ce()){var e=Ue("code_challenge");if(e)return be.codeChallenge=e,function(e){if(ce()){if(!e)return Te();be.codeChallenge=e;var n=Date.now()+3e5;try{window.localStorage.setItem("uf_pkce_code_challenge",e),window.localStorage.setItem("uf_pkce_code_challenge_expiresAt",n)}catch(e){}}}(e),!0;var n=function(){if(ce()){var e=window.localStorage.getItem("uf_pkce_code_challenge");if(e){var n=window.localStorage.getItem("uf_pkce_code_challenge_expiresAt");if(n&&parseInt(n,10)>Date.now())return e}}}();return n?(be.codeChallenge=n,!0):(Te(),!1)}}function Ee(){return be.usePkce?{code_challenge:be.codeChallenge}:{}}function Ue(e){if("object"==typeof window&&"object"==typeof window.location&&window.location.href&&!(window.location.href.indexOf(e+"=")<0))return decodeURIComponent(window.location.href.split(e+"=")[1].split("&")[0])}var xe=function(e,n){!1!==e&&Pe(!0!==e?e||Ue("redirect")||n.redirectTo||"/":Ue("redirect")||n.redirectTo||"/")};function Pe(e){if(e&&"object"==typeof document&&"object"==typeof window){try{document&&window}catch(e){return}var n=document.createElement("a");n.href=e,n.pathname!==window.location.pathname&&window.location.assign(""+n.pathname+n.hash+n.search)}}var Ce=function(e){var n=e.data,t=e.redirect,r=e.handleUpstreamResponse,a=e.handleMfaRequired,i=e.handlePkceRequired,s=e.handleTokens,c=e.handleRedirect;try{function u(){var e;function r(r){if(e)return r;function a(){var e;function r(r){if(e)return r;var a=function(){if(n.hasOwnProperty("redirectTo")&&!1!==t){var e=function(){if("function"==typeof c)return o.resolve(c(d,n)).then(function(){});xe(d,n)}();if(e&&e.then)return e.then(function(){})}}();return a&&a.then?a.then(function(){return n}):n}var a=function(){if(n.hasOwnProperty("authorizationCode")){if(!d)throw new Error("Missing PKCE redirect url");return"function"==typeof i?o.resolve(i(n.authorizationCode,d,n)).then(function(){}):(function(e,n,t){if(n&&e){be.usePkce||console.warn("Redirecting with a PKCE authorization code, but no PKCE challenge code is present in the client. This is unexpected.");var r=new URL(n);r.searchParams.set("authorization_code",e),Te(),window.location.assign(r.href)}}(n.authorizationCode,d),e=1,n)}}();return a&&a.then?a.then(r):r(a)}var u=function(){if(n.hasOwnProperty("tokens")){var e="function"==typeof s?o.resolve(s(n.tokens,n)).then(function(){}):o.resolve(Ne(n.tokens,n)).then(function(){});if(e&&e.then)return e.then(function(){})}}();return u&&u.then?u.then(a):a()}var u=function(){if(n.hasOwnProperty("firstFactorToken")){function t(){return e=1,n}var r=function(){if("function"==typeof a)return o.resolve(a(n.firstFactorToken,n)).then(function(){});!function(e,n){n.isMfaRequired?(Ie.firstFactorToken=e,Ie.secondFactors=n.authentication.secondFactors):"OK"===n.message&&ke()}(n.firstFactorToken,n)}();return r&&r.then?r.then(t):t()}}();return u&&u.then?u.then(r):r(u)}var d=t||Ue("redirect")||n.redirectTo||"/",l=function(){if("function"==typeof r)return o.resolve(r(n.upstreamResponse,n)).then(function(){})}();return o.resolve(l&&l.then?l.then(u):u())}catch(f){return o.reject(f)}},Ie={firstFactors:[],secondFactors:[],firstFactorToken:null};function Se(e){pe(e.access.value,e.access.cookieOptions,"access"),pe(e.id.value,e.id.cookieOptions,"id"),e.refresh&&e.refresh.value&&pe(e.refresh.value,e.refresh.cookieOptions,"refresh"),_e()}function qe(e,n){try{var t=e()}catch(e){return n(e)}return t&&t.then?t.then(void 0,n):t}var Oe=function(){try{var e=qe(function(){return o.resolve(function(){try{var e=oe.get(re.tokens.refreshTokenName);return o.resolve(qe(function(){return o.resolve(he("/auth/refresh",{headers:{authorization:"Bearer "+e}})).then(function(e){var n=e.data;if(200!==e.status)throw new Error(n.message||"Problem with request");if(n.tokens)return Se(n.tokens),n;throw new Error("Problem setting cookies")})},function(e){se(e)}))}catch(e){return o.reject(e)}}()).then(function(){})},function(e){console.warn("Refresh failed: "+e.message)});return o.resolve(e&&e.then?e.then(function(){}):void 0)}catch(e){return o.reject(e)}},Ne=function(e,n){try{return Se(e),o.resolve(o.resolve()).then(function(){})}catch(e){return o.reject(e)}};function _e(){["access","id","refresh"].map(function(e){try{var n=oe.get(re.tokens[e+"TokenName"]);re.tokens[e+"Token"]=n,"id"===e&&n&&function(){if(!re.tokens.idToken)return console.warn("Cannot define user: missing ID token");re.user=re.user||{};for(var e=ae(re.tokens.idToken),n=0,t=["email","phoneNumber","username","name","image","data","createdAt","updatedAt","mode","userId","userUuid","tenantId","isEmailConfirmed","isPhoneNumberConfirmed","confirmedEmailAt","confirmedPhoneNumberAt","isMfaRequired","isConfirmed"];n<t.length;n++){var r=t[n];if("update"===r)return;re.user[r]=e[r]}}()}catch(n){console.warn("Problem setting "+e+" token.")}})}function Ae(){return ie(re.tokens.accessToken)}re.tokens=re.tokens||{},re.tokens.refresh=Oe;var Me=re.tokens;function Fe(e,n){try{var t=e()}catch(e){return n(e)}return t&&t.then?t.then(void 0,n):t}var Be=function(e){var n=e.password,t=e.existingPassword;try{return o.resolve(Fe(function(){if(!re.tokens.accessToken)throw new Error('updatePassword({ method: "jwt" }) was called without a JWT access token.');return o.resolve(le("/auth/basic",{tenantId:re.tenantId,password:n,existingPassword:t},{headers:{Authorization:"Bearer "+re.tokens.accessToken}})).then(function(e){return e.data})},function(e){se(e)}))}catch(e){return o.reject(e)}},Le=function(e){var n=e.uuid,t=e.token,r=e.password,a=e.redirect,i=e.handleUpstreamResponse,s=e.handleMfaRequired,c=e.handlePkceRequired,u=e.handleTokens,d=e.handleRedirect;try{return o.resolve(Fe(function(){if(t=t||Ue("token"),n=n||Ue("uuid"),!t||!n)throw new Error("Missing token or uuid");return o.resolve(le("/auth/reset",{tenantId:re.tenantId,uuid:n,token:t,password:r})).then(function(e){return Ce({data:e.data,redirect:a,handleUpstreamResponse:i,handleMfaRequired:s,handlePkceRequired:c,handleTokens:u,handleRedirect:d})})},function(e){se(e)}))}catch(e){return o.reject(e)}},De=function(e){var n=e.method,t=e.password,r=e.existingPassword,a=e.uuid,i=e.token,s=e.redirect,c=e.handleUpstreamResponse,u=e.handleMfaRequired,d=e.handlePkceRequired,l=e.handleTokens,f=e.handleRedirect;try{switch(n){case"link":return Le({uuid:a,token:i,password:t,redirect:s,handleUpstreamResponse:c,handleMfaRequired:u,handlePkceRequired:d,handleTokens:l,handleRedirect:f});case"jwt":return Be({password:t,existingPassword:r});default:if(i=i||Ue("token"),(a=a||Ue("uuid"))&&i)return Le({uuid:a,token:i,password:t,redirect:s,handleUpstreamResponse:c,handleMfaRequired:u,handlePkceRequired:d,handleTokens:l,handleRedirect:f});if(re.tokens.accessToken)return Be({password:t,existingPassword:r});throw new Error("updatePassword() was called without link credentials (token & uuid) or a JWT access token.")}}catch(e){return o.reject(e)}},ze=De;function Je(e){var n=e.provider,t=e.redirect;if(!n)throw new Error("Missing provider");var r=function(e){var n=e.provider,t=e.redirect;if(!n)throw new Error("Missing provider");if(!re.tenantId)throw new Error("Missing tenantId");var r=re.baseUrl+"auth/"+n+"/login?tenant_id="+re.tenantId+"&origin="+window.location.origin,o=t||Ue("redirect");return!1===t&&(o="object"==typeof document&&document.location.pathname),o&&(r+="&redirect="+encodeURIComponent(o)),r}({provider:n,redirect:t});window.location.assign(r)}function He(e,n){try{var t=e()}catch(e){return n(e)}return t&&t.then?t.then(void 0,n):t}var We=function(e){var n=e.email,t=e.name,r=e.username,a=e.userData,i=e.options;try{return o.resolve(He(function(){return o.resolve(fe("/auth/link",{email:n,name:t,username:r,data:a,options:i,tenantId:re.tenantId})).then(function(e){return e.data})},function(e){se(e)}))}catch(e){return o.reject(e)}};function Ve(e,n){try{var t=e()}catch(e){return n(e)}return t&&t.then?t.then(void 0,n):t}function Ke(e){var n=e.channel,t=e.phoneNumber,r=e.email;if("sms"!==n&&"email"!==n)throw new Error("Invalid channel");if(!we()){if("sms"===n&&!t)throw new Error('SMS verification code requires "phoneNumber"');if("email"===n&&!r)throw new Error('Email verification code requires "email"')}}var Xe=function(e){var n=e.channel,t=void 0===n?"sms":n,r=e.phoneNumber,a=e.email,i=e.name,s=e.username,c=e.data;try{return o.resolve(Ve(function(){return Ke({channel:t,phoneNumber:r,email:a}),o.resolve(fe("/auth/code",{channel:t,email:a,phoneNumber:r,name:i,username:s,data:c,tenantId:re.tenantId},{headers:ge()})).then(function(e){return e.data})},function(e){se(e)}))}catch(e){return o.reject(e)}};function $e(e,n){try{var t=e()}catch(e){return n(e)}return t&&t.then?t.then(void 0,n):t}function Ge(e,n){try{var t=e()}catch(e){return n(e)}return t&&t.then?t.then(void 0,n):t}var Ze=/((^127\.)|(^10\.)|(^172\.1[6-9]\.)|(^172\.2[0-9]\.)|(^172\.3[0-1]\.)|(^192\.168\.))\d{1,3}\.\d{1,3}/g,Qe=function(){try{return o.resolve(function(e,n){try{var t=o.resolve(he("/tenants/"+re.tenantId+"/mode")).then(function(e){var n,t=e.data;return Ye.value=t.mode||"test",Ye.reason=nn(Ye.value),re.mode=Ye.value,n=t.authentication,re.tenantId?n&&"object"==typeof n&&Array.isArray(n.firstFactors)?Ie.firstFactors=n.firstFactors:console.warn("setFirstFactors: invalid factors passed."):console.warn("setFirstFactors: tried to set factors without a tenantId set."),t})}catch(e){return n()}return t&&t.then?t.then(void 0,n):t}(0,function(){Ye.value="test",re.mode=Ye.value}))}catch(e){return o.reject(e)}},Ye={value:"live",reason:void 0,setMode:Qe};function en(){var e=function(e){try{var n=window.location.hostname;return!(!n.match(/localhost/g)&&!n.match(Ze))}catch(e){return!0}}()||!function(){try{return"https:"===window.location.protocol}catch(e){return!1}}()?"test":"live";Ye.value=e,Ye.reason=nn(e),re.mode=e}function nn(e){try{return"live"===e?"domain":"http:"===window.location.protocol?"http":"https:"!==window.location.protocol?"protocol":"domain"}catch(e){}}en(),re.user.update=function(e){try{return!e||Object.keys(e).length<1?o.resolve(console.warn("Missing user properties to update")):o.resolve(le("/self",e,{headers:{authorization:"Bearer "+re.tokens.accessToken}})).then(function(){return o.resolve(Oe()).then(function(){return re.user})})}catch(e){return o.reject(e)}},re.user.hasRole=function(e,n){var t=(void 0===n?{}:n).tenantId;try{if(!re.tokens.accessToken||!re.tenantId)return!1;var r=ae(re.tokens.accessToken).authorization;return!!r&&!(!r[t=t||re.tenantId]||!r[t].roles)&&r[t].roles.indexOf(e)>-1}catch(e){return!1}},re.user.updatePassword=De,re.user.getTotp=function(){try{var e;return o.resolve($e(function(){function n(n){if(e)return n;if(!re.tokens.accessToken)throw new Error("getTotp() was called without a JWT access token.");return o.resolve(he("/auth/totp",{headers:{Authorization:"Bearer "+re.tokens.accessToken}})).then(function(e){return e.data})}var t=function(){if(we())return o.resolve(he("/auth/totp",{headers:ge()})).then(function(n){return e=1,n.data})}();return t&&t.then?t.then(n):n(t)},function(e){se(e)}))}catch(e){return o.reject(e)}};var tn=[],rn=!1,on={addInitCallback:function(e){e&&"function"==typeof e&&tn.push(e)},init:function(e,n){if(void 0===n&&(n={}),!e)return console.warn("Userfront initialized without tenantId");if(re.tenantId=e,re.baseUrl=n.baseUrl||"https://api.userfront.com/v0/",re.baseUrl.endsWith("/")||(re.baseUrl+="/"),n.domain){re.domain=n.domain;var t="https://"+re.domain;te.defaults.headers.common["x-application-id"]=t,te.defaults.headers.common["x-origin"]=t}re.tokens=re.tokens||{},re.tokens.accessTokenName="access."+re.tenantId,re.tokens.idTokenName="id."+re.tenantId,re.tokens.refreshTokenName="refresh."+re.tenantId,_e(),en(),ke(),Ie.firstFactors=[];try{tn.length>0&&tn.forEach(function(n){n&&"function"==typeof n&&n({tenantId:e})}),tn=[]}catch(e){}},registerUrlChangedEventListener:function(){if(!rn){rn=!0;try{history.pushState=(e=history.pushState,function(){var n=e.apply(this,arguments);return window.dispatchEvent(new Event("pushstate")),window.dispatchEvent(new Event("urlchanged")),n}),history.replaceState=function(e){return function(){var n=e.apply(this,arguments);return window.dispatchEvent(new Event("replacestate")),window.dispatchEvent(new Event("urlchanged")),n}}(history.replaceState),window.addEventListener("popstate",function(){window.dispatchEvent(new Event("urlchanged"))})}catch(e){}var e}},logout:function(e){var n=void 0===e?{}:e,t=n.method,r=n.redirect;try{if("saml"===t)return function(){try{if(!re.tokens.accessToken)throw new Error("Please log in to authorize your logout request.");var e=Ge(function(){return o.resolve(he("/auth/saml/idp/token",{headers:{authorization:"Bearer "+re.tokens.accessToken}})).then(function(e){window.location.assign(re.baseUrl+"auth/saml/idp/logout?tenant_id="+re.tenantId+"&token="+e.data.token+"&uuid="+re.user.userUuid)})},function(e){se(e)});return o.resolve(e&&e.then?e.then(function(){}):void 0)}catch(e){return o.reject(e)}}();if(!re.tokens.accessToken)return o.resolve(ve());var a=Ge(function(){return o.resolve(he("/auth/logout",{headers:{authorization:"Bearer "+re.tokens.accessToken}})).then(function(e){var n=e.data;ve(),xe(r,n)})},function(){ve()});return o.resolve(a&&a.then?a.then(function(){}):void 0)}catch(e){return o.reject(e)}},mode:Ye,setMode:Qe,refresh:function(e,n,t){try{console.warn("Userfront.refresh() is deprecated and will be removed. Please use Userfront.tokens.refresh() instead.")}catch(e){}return Oe()},login:function(e){var n=void 0===e?{}:e,t=n.method,r=n.userId,a=n.userUuid,i=n.email,s=n.username,c=n.emailOrUsername,u=n.phoneNumber,d=n.password,l=n.token,f=n.uuid,h=n.totpCode,p=n.backupCode,m=n.channel,v=n.verificationCode,w=n.redirect,g=n.handleUpstreamResponse,k=n.handleMfaRequired,y=n.handlePkceRequired,R=n.handleTokens,b=n.handleRedirect,T=n.options;try{if(!t)throw new Error('Userfront.login called without "method" property.');switch(je(),t){case"apple":case"azure":case"facebook":case"github":case"google":case"linkedin":case"okta":return o.resolve(Je({provider:t,redirect:w}));case"password":return o.resolve(function(e){var n=e.email,t=e.username,r=e.emailOrUsername,a=e.password,i=e.redirect,s=e.handleUpstreamResponse,c=e.handleMfaRequired,u=e.handlePkceRequired,d=e.handleTokens,l=e.handleRedirect,f=e.options;try{return o.resolve(Fe(function(){var e={tenantId:re.tenantId,emailOrUsername:n||t||r,password:a};return f&&f.noResetEmail&&(e.options={noResetEmail:!0}),o.resolve(fe("/auth/basic",e,{headers:ge(),params:Ee()})).then(function(e){return Ce({data:e.data,redirect:i,handleUpstreamResponse:s,handleMfaRequired:c,handlePkceRequired:u,handleTokens:d,handleRedirect:l})})},function(e){se(e)}))}catch(e){return o.reject(e)}}({email:i,username:s,emailOrUsername:c,password:d,redirect:w,handleUpstreamResponse:g,handleMfaRequired:k,handlePkceRequired:y,handleTokens:R,handleRedirect:b,options:T}));case"password-migrate":return o.resolve(function(e){var n=e.email,t=e.username,r=e.emailOrUsername,a=e.password,i=e.redirect,s=e.handleUpstreamResponse,c=e.handleMfaRequired,u=e.handlePkceRequired,d=e.handleTokens,l=e.handleRedirect,f=e.options;try{return o.resolve(function(e,h){try{var p=function(){var e={tenantId:re.tenantId,emailOrUsername:n||t||r,password:a};return f&&f.noResetEmail&&(e.options={noResetEmail:!0}),o.resolve(fe("/auth/password/migrate",e,{headers:ge(),params:Ee()})).then(function(e){return Ce({data:e.data,redirect:i,handleUpstreamResponse:s,handleMfaRequired:c,handlePkceRequired:u,handleTokens:d,handleRedirect:l})})}()}catch(e){return h(e)}return p&&p.then?p.then(void 0,h):p}(0,function(e){se(e)}))}catch(e){return o.reject(e)}}({email:i,username:s,emailOrUsername:c,password:d,redirect:w,handleUpstreamResponse:g,handleMfaRequired:k,handlePkceRequired:y,handleTokens:R,handleRedirect:b,options:T}));case"passwordless":return o.resolve(We({email:i}));case"link":return o.resolve(function(e){var n=void 0===e?{}:e,t=n.token,r=n.uuid,a=n.redirect,i=n.handleUpstreamResponse,s=n.handleMfaRequired,c=n.handlePkceRequired,u=n.handleTokens,d=n.handleRedirect;try{return o.resolve(He(function(){if(t=t||Ue("token"),r=r||Ue("uuid"),t&&r)return o.resolve(le("/auth/link",{token:t,uuid:r,tenantId:re.tenantId},{headers:ge(),params:Ee()})).then(function(e){return Ce({data:e.data,redirect:a,handleUpstreamResponse:i,handleMfaRequired:s,handlePkceRequired:c,handleTokens:u,handleRedirect:d})})},function(e){se(e)}))}catch(e){return o.reject(e)}}({token:l,uuid:f,redirect:w,handleUpstreamResponse:g,handleMfaRequired:k,handlePkceRequired:y,handleTokens:R,handleRedirect:b}));case"totp":return o.resolve(function(e){var n=void 0===e?{}:e,t=n.totpCode,r=n.backupCode,a=n.userId,i=n.userUuid,s=n.emailOrUsername,c=n.email,u=n.username,d=n.phoneNumber,l=n.redirect,f=n.handleUpstreamResponse,h=n.handleMfaRequired,p=n.handlePkceRequired,m=n.handleTokens,v=n.handleRedirect;try{return o.resolve($e(function(){return o.resolve(fe("/auth/totp",{totpCode:t,backupCode:r,userId:a,userUuid:i,emailOrUsername:s,email:c,username:u,phoneNumber:d,tenantId:re.tenantId},{headers:ge(),params:Ee()})).then(function(e){return Ce({data:e.data,redirect:l,handleUpstreamResponse:f,handleMfaRequired:h,handlePkceRequired:p,handleTokens:m,handleRedirect:v})})},function(e){se(e)}))}catch(e){return o.reject(e)}}({totpCode:h,backupCode:p,userId:r,userUuid:a,emailOrUsername:c,email:i,username:s,phoneNumber:u,redirect:w,handleUpstreamResponse:g,handleMfaRequired:k,handlePkceRequired:y,handleTokens:R,handleRedirect:b}));case"verificationCode":return o.resolve(function(e){var n=void 0===e?{}:e,t=n.channel,r=n.verificationCode,a=n.email,i=n.phoneNumber,s=n.redirect,c=n.handleUpstreamResponse,u=n.handleMfaRequired,d=n.handlePkceRequired,l=n.handleTokens,f=n.handleRedirect;try{return o.resolve(Ve(function(){return Ke({channel:t,phoneNumber:i,email:a}),o.resolve(le("/auth/code",{channel:t,verificationCode:r,email:a,phoneNumber:i,tenantId:re.tenantId},{headers:ge(),params:Ee()})).then(function(e){return Ce({data:e.data,redirect:s,handleUpstreamResponse:c,handleMfaRequired:u,handlePkceRequired:d,handleTokens:l,handleRedirect:f})})},function(e){se(e)}))}catch(e){return o.reject(e)}}({channel:m,email:i,phoneNumber:u,verificationCode:v,redirect:w,handleUpstreamResponse:g,handleMfaRequired:k,handlePkceRequired:y,handleTokens:R,handleRedirect:b}));case"saml":return o.resolve(function(){try{return o.resolve(function(e,n){try{var t=re.tokens.accessToken?o.resolve(he("/auth/saml/idp/token",{headers:{authorization:"Bearer "+re.tokens.accessToken}})).then(function(e){window.location.assign(re.baseUrl+"auth/saml/idp/login?tenant_id="+re.tenantId+"&token="+e.data.token+"&uuid="+re.user.userUuid)}):console.warn("Cannot complete SAML login without access token")}catch(e){return n(e)}return t&&t.then?t.then(void 0,n):t}(0,function(e){se(e)}))}catch(e){return o.reject(e)}}());default:throw new Error('Userfront.login called with invalid "method" property.')}}catch(e){return o.reject(e)}},resetPassword:ze,updatePassword:De,sendLoginLink:function(e){try{return o.resolve(He(function(){return o.resolve(fe("/auth/link",{email:e,tenantId:re.tenantId})).then(function(e){return e.data})},function(e){se(e)}))}catch(e){return o.reject(e)}},sendResetLink:function(e){try{return o.resolve(Fe(function(){return o.resolve(fe("/auth/reset/link",{email:e,tenantId:re.tenantId})).then(function(e){return e.data})},function(e){se(e)}))}catch(e){return o.reject(e)}},sendVerificationCode:Xe,signup:function(e){var n=void 0===e?{}:e,t=n.method,r=n.email,a=n.username,i=n.phoneNumber,s=n.name,c=n.data,u=n.password,d=n.channel,l=n.redirect,f=n.handleUpstreamResponse,h=n.handleMfaRequired,p=n.handlePkceRequired,m=n.handleTokens,v=n.handleRedirect;try{if(je(),!t)throw new Error('Userfront.signup called without "method" property.');switch(t){case"apple":case"azure":case"facebook":case"github":case"google":case"linkedin":case"okta":return o.resolve(Je({provider:t,redirect:l}));case"password":return o.resolve(function(e){var n=void 0===e?{}:e,t=n.username,r=n.name,a=n.email,i=n.password,s=n.userData,c=n.redirect,u=n.handleUpstreamResponse,d=n.handleMfaRequired,l=n.handlePkceRequired,f=n.handleTokens,h=n.handleRedirect;try{return o.resolve(Fe(function(){return o.resolve(fe("/auth/create",{tenantId:re.tenantId,username:t,name:r,email:a,password:i,data:s},{headers:ge(),params:Ee()})).then(function(e){return Ce({data:e.data,redirect:c,handleUpstreamResponse:u,handleMfaRequired:d,handlePkceRequired:l,handleTokens:f,handleRedirect:h})})},function(e){se(e)}))}catch(e){return o.reject(e)}}({username:a,name:s,email:r,password:u,userData:c,redirect:l,handleUpstreamResponse:f,handleMfaRequired:h,handlePkceRequired:p,handleTokens:m,handleRedirect:v}));case"passwordless":return o.resolve(We({email:r,name:s,username:a,userData:c}));case"verificationCode":return o.resolve(Xe({channel:d,email:r,phoneNumber:i,name:s,username:a,data:c}));default:throw new Error('Userfront.signup called with invalid "method" property.')}}catch(e){return o.reject(e)}},store:re,tokens:Me,accessToken:function(){return re.tokens.accessToken=oe.get(re.tokens.accessTokenName),re.tokens.accessToken},idToken:function(){return re.tokens.idToken=oe.get(re.tokens.idTokenName),re.tokens.idToken},getSession:ye,redirectIfLoggedIn:function(e){var n=(void 0===e?{}:e).redirect;try{return o.resolve(ye()).then(function(e){if(!e.isLoggedIn)return ve();if(!be.usePkce){if(n)return Pe(n);if(Ue("redirect"))return Pe(Ue("redirect"));var t=function(e,n){try{var t=o.resolve(he("/self",{headers:{authorization:"Bearer "+re.tokens.accessToken}})).then(function(e){var n=e.data;n.tenant&&n.tenant.loginRedirectPath&&Pe(n.tenant.loginRedirectPath)})}catch(e){return n()}return t&&t.then?t.then(void 0,n):t}(0,function(){ve()});return t&&t.then?t.then(function(){}):void 0}})}catch(e){return o.reject(e)}},redirectIfLoggedOut:function(e){var n=(void 0===e?{}:e).redirect;try{return o.resolve(ye()).then(function(e){if(!e.isLoggedIn)return ve(),n?Pe(n):Ue("redirect")?Pe(Ue("redirect")):void 0})}catch(e){return o.reject(e)}},user:ue};return on});
//# sourceMappingURL=userfront-core.ie11.umd.js.map
